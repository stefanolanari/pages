<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <title>pdfmake - ESE_B13 Modulo fattura</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.10/pdfmake.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.10/vfs_fonts.min.js"></script>
  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
      padding: 2rem;
    }
    button {
      padding: 10px 18px;
      border-radius: 6px;
      border: none;
      background: #0077cc;
      color: white;
      font-size: 15px;
      cursor: pointer;
    }
    button:hover { background: #005fa3; }
  </style>
</head>
<body>
  <h2>Modulo fattura</h2>
  <p>Fattura generata da LLM (gpt-5 mini) aggiungendo al contesto il print-screen del PDF generato da H53</p>
  <button onclick="generaPDF()">Genera PDF</button>

  <script>
    function generaPDF() {
      const dd = {
  pageSize: 'A4',
  pageMargins: [36, 36, 36, 40],
  // Usa il font Roboto fornito da vfs_fonts per evitare errori di font non definito
  defaultStyle: { fontSize: 10, font: 'Roboto' },

        // ðŸŽ¨ Stili riutilizzabili
        styles: {
          headerLeft: { alignment: 'left', fontSize: 11 },
          name: { bold: true, italics: true, fontSize: 12 },
          small: { fontSize: 9 },
          tableItem: { fontSize: 9 }
        },

        content: [
          // Intestazione: sinistra i riquadri colorati, destra indirizzi
          {
            columns: [
              // colonna sinistra con due riquadri (blu e rosso)
              {
                width: 220,
                stack: [
                  // riquadro blu
                  {
                    table: {
                      widths: ['*'],
                      body: [
                        [ { text: 'Modulo fattura Sme.UP', color: 'white', bold: true, margin: [8,6,8,6] } ]
                      ]
                    },
                    layout: {
                      hLineWidth: function() { return 0; },
                      vLineWidth: function() { return 0; },
                      paddingLeft: function() { return 0; },
                      paddingRight: function() { return 0; },
                      paddingTop: function() { return 0; },
                      paddingBottom: function() { return 0; }
                    },
                    // cell fillColor
                    margin: [0,0,0,6],
                    fillColor: '#2c74b3'
                  },

                  // riquadro rosso piccolo sotto
                  {
                    table: { widths: [120], body: [ [ { text: 'ESE_B13', bold: true, margin: [6,4,6,4] } ] ] },
                    layout: {
                      hLineWidth: function() { return 0; },
                      vLineWidth: function() { return 0; }
                    },
                    fillColor: '#ff0000'
                  }
                ]
              },

              {
                width: '*',
                // sposta la colonna degli indirizzi un po' piÃ¹ a destra
                margin: [100, 0, 0, 0],
                stack: [
                  { text: 'ROSSI MARIO', style: 'name', alignment: 'left', margin: [0,4,0,4] },
                  { text: 'Via Primo Aprile 2008\n\n25030 ERBUSCO (BS)', style: 'headerRight', margin: [0,0,0,12] },

                  { text: 'VERDE LUIGI', style: 'name', alignment: 'left', margin: [0,16,0,4] },
                  { text: 'Via Marted\u00ec 01\n\n25038 ROVATO (BS)', style: 'headerRight', }
                ]
              }
            ]
          },

          // Piccole informazioni centrali (numeri, date, ecc.) organizzate in colonne
          {
            columns: [
              { width: 120, text: '123456', margin: [0,24,0,0] },
              { width: 120, text: '19/09/08', margin: [20,24,0,0] },
              { width: 80, text: '000001', margin: [20,24,0,0] },
              {
                width: '*',
                text: '12345678910111    9030 39 20    FRANCO FABBRICA    Corriere    Eu',
                margin: [0,24,0,0],
                style: 'small'
              }
            ]
          },

          // Spazio di separazione
          { text: '\n' },

          // Tabella articoli simile a layout monospaziato
          {
            table: {
              widths: [20, 50, '*', 30, 50, 50, 60],
              body: [
                // righe dati
                [ { text: '1', style: 'tableItem' }, { text: 'Art. 1', style: 'tableItem' }, { text: 'Articolo Primo', style: 'tableItem' }, { text: 'Mt.', style: 'tableItem' }, { text: '20', style: 'tableItem' }, { text: '1.000,00', style: 'tableItem', alignment: 'right' }, { text: '900,00', style: 'tableItem', alignment: 'right' } ],
                [ { text: '2', style: 'tableItem' }, { text: 'Art. 2', style: 'tableItem' }, { text: 'Articolo Secondo', style: 'tableItem' }, { text: 'Cm.', style: 'tableItem' }, { text: '200', style: 'tableItem' }, { text: '1.500,00', style: 'tableItem', alignment: 'right' }, { text: '750,00', style: 'tableItem', alignment: 'right' } ],
                [ { text: '3', style: 'tableItem' }, { text: 'Art. 3', style: 'tableItem' }, { text: 'Articolo Terzo', style: 'tableItem' }, { text: 'Cm.', style: 'tableItem' }, { text: '30', style: 'tableItem' }, { text: '3.500,00', style: 'tableItem', alignment: 'right' }, { text: '3.395,00', style: 'tableItem', alignment: 'right' } ],
                [ { text: '4', style: 'tableItem' }, { text: 'Art. 4', style: 'tableItem' }, { text: 'Articolo Quarto', style: 'tableItem' }, { text: 'Mt.', style: 'tableItem' }, { text: '1000', style: 'tableItem' }, { text: '2.000,00', style: 'tableItem', alignment: 'right' }, { text: '1.800,00', style: 'tableItem', alignment: 'right' } ],
                [ { text: '5', style: 'tableItem' }, { text: 'Art. 5', style: 'tableItem' }, { text: 'Articolo Quinto', style: 'tableItem' }, { text: 'Cm.', style: 'tableItem' }, { text: '2', style: 'tableItem' }, { text: '4.000,00', style: 'tableItem', alignment: 'right' }, { text: '3.200,00', style: 'tableItem', alignment: 'right' } ]
              ]
            },
            layout: {
              hLineWidth: function(i, node) { return 0; },
              vLineWidth: function(i, node) { return 0; }
            },
            margin: [0, 20, 0, 0]
          }
        ]
      };

      // Apri il PDF
      pdfMake.createPdf(dd).open();
    }
  </script>
</body>
</html>
